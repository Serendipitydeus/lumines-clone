!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=[[[2,2],[2,2]],[[1,2],[1,2]],[[1,2],[1,1]],[[2,1],[2,1]],[[2,1],[2,2]],[[1,1],[1,1]],[[2,1],[1,2]],[[1,2],[2,1]]];Object.freeze(n);var o=function(){function e(t,i,r,o,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.firstColor=i,this.secondColor=r,this.piece=n[Math.floor(Math.random()*n.length)],this.x=o,this.y=c}var t,i,o;return t=e,(i=[{key:"render",value:function(){var e=this;this.piece.forEach((function(t,i){t.forEach((function(t,r){1===t?(e.ctx.fillStyle=e.firstColor,e.ctx.fillRect(e.x+r,e.y+i,1,1)):2===t&&(e.ctx.fillStyle=e.secondColor,e.ctx.fillRect(e.x+r,e.y+i,1,1))}))}))}},{key:"move",value:function(e){this.x=e.x,this.y=e.y}},{key:"rotate",value:function(e){for(var t=0;t<e.piece.length;++t)for(var i=0;i<t;++i){var r=[e.piece[t][i],e.piece[i][t]];e.piece[i][t]=r[0],e.piece[t][i]=r[1]}return e.piece.forEach((function(e){return e.reverse()})),e}}])&&r(t.prototype,i),o&&r(t,o),e}();function c(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.freeze(16,10,50);Object.freeze(["thistle","darkslategray","#FC7A1E","#C5E99B","#EDD2E0","#6E4555","#584FEC","#000000","#E7E7E7","#F24C00"]);var u=function(e){return a(a({},e),{},{y:e.y+1})},f=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d"),this.ctxDos=i.getContext("2d"),this.firstColor="black",this.secondColor="#FC7A1E",console.log(this.firstColor,this.secondColor),this.ctx.scale(50,50),this.ctxDos.scale(50,50),this.movement(),this.animate=this.animate.bind(this),this.time={start:0,elapsed:0,seconds:750}}var t,i,r;return t=e,(i=[{key:"generateField",value:function(){this.grid=this.getNewBoard(),this.nextGrid=this.getNewPieceBoard(),this.generatePieces(),this.animate()}},{key:"generatePieces",value:function(){var e={x:7,y:0};this.piece=new o(this.ctx,this.firstColor,this.secondColor,e.x,e.y),console.log(this.piece),this.secondPiece=new o(this.ctxDos,this.firstColor,this.secondColor,e.x=1,e.y=1),console.log(this.secondPiece),console.table(this.grid),this.thirdPiece=new o(this.ctxDos,this.firstColor,this.secondColor,e.x=1,e.y=4),this.fourthPiece=new o(this.ctxDos,this.firstColor,this.secondColor,e.x=1,e.y=7)}},{key:"getNewBoard",value:function(){return Array.from({length:10},(function(){return Array(16).fill(0)}))}},{key:"getNewPieceBoard",value:function(){return Array.from({length:8},(function(){return Array(4).fill(0)}))}},{key:"movement",value:function(){var e=this,t={left:function(e){return a(a({},e),{},{x:e.x-1})},right:function(e){return a(a({},e),{},{x:e.x+1})},down:function(e){return a(a({},e),{},{y:e.y+1})},up:function(e){return a(a({},e),{},{y:e.y-1})},keyE:function(t){return e.piece.rotate(t)}};Object.freeze(t),document.addEventListener("keydown",(function(i){if(!i.defaultPrevented){switch(i.code){case"KeyW":case"ArrowUp":var r=t.up(e.piece);e.validPosition(r)&&e.piece.move(r);break;case"KeyS":case"ArrowDown":var n=t.down(e.piece);e.validPosition(n)&&e.piece.move(n);break;case"KeyA":case"ArrowLeft":var o=t.left(e.piece);e.validPosition(o)&&e.piece.move(o);break;case"KeyD":case"ArrowRight":var c=t.right(e.piece);e.validPosition(c)&&e.piece.move(c);break;case"KeyE":var s=t.keyE(e.piece);e.validPosition(s)&&e.piece.move(s)}e.ctx.clearRect(0,0,e.ctx.canvas.width,e.ctx.canvas.height),e.animate(),i.preventDefault()}}))}},{key:"sideBoundaries",value:function(e){return e>=0&&e<16}},{key:"bottomBoundary",value:function(e){return e<10}},{key:"emptyPos",value:function(e,t){return this.grid[e]&&this.grid[t]&&0===this.grid[t][e]}},{key:"validPosition",value:function(e){var t=this;return e.piece.every((function(i,r){return i.every((function(i,n){var o=e.x+n,c=e.y+r;return t.emptyPos(o,c)&&t.sideBoundaries(o)&&t.bottomBoundary(c)}))}))}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time.elapsed=t-this.time.start,this.time.elapsed>this.time.seconds&&(this.time.start=t,this.animatePiece()),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.piece.render(),this.secondPiece.render(),this.thirdPiece.render(),this.fourthPiece.render(),this.grid.forEach((function(t,i){t.forEach((function(t,r){1===t?(e.ctx.fillStyle=e.firstColor,e.ctx.fillRect(r,i,1,1)):2===t&&(e.ctx.fillStyle=e.secondColor,e.ctx.fillRect(r,i,1,1))}))})),requestAnimationFrame(this.animate)}},{key:"animatePiece",value:function(){var e=u(this.piece),t=1,i=7;this.validPosition(e)?this.piece.move(e):(this.dropPiece(),this.piece=this.secondPiece,this.piece.ctx=this.ctx,this.piece.x=7,this.piece.y=0,this.secondPiece=this.thirdPiece,this.secondPiece.x=1,this.secondPiece.y=1,this.thirdPiece=this.fourthPiece,this.thirdPiece.x=1,this.thirdPiece.y=4,this.fourthPiece=new o(this.ctxDos,this.firstColor,this.secondColor,t,i))}},{key:"dropPiece",value:function(){var e=this;this.piece.piece.forEach((function(t,i){t.forEach((function(t,r){t>0&&(e.grid[i+e.piece.y][r+e.piece.x]=t)}))}))}}])&&c(t.prototype,i),r&&c(t,r),e}();document.querySelector("#start-lumines").addEventListener("click",(function(){var e=new f(h,d);e.generateField(),console.table(e.grid),console.table(e.nextGrid),console.log(e)})),document.querySelector("#reset-lumines").addEventListener("click",(function(){}));var h=document.getElementById("game-board-id"),d=document.getElementById("next-piece-id")}]);
//# sourceMappingURL=main.js.map